{% extends "base.html" %}
{% block content %}

<h6 class="ms-2">Account / B2C (Small) Invoices - 7</h6>

<div class="card mt-4">
    <div class="w-100 mt-4 mb-5">
        
        <div class="row w-100 mb-4">
            
                <div class="col-2">
                    <div class="col ms-3">
                        <label for="nameBackdrop" class="form-label">From Date :</label>
                        <input type="date" readonly name="startdate" id="nameBackdrop" class="form-control" required value="{{ startdate|date:'Y-m-d' }}" />
                    </div>
                </div>
                <div class="col-2">
                    <div class="col ms-3">
                        <label for="nameBackdrop" class="form-label">To Date :</label>
                        <input type="date" readonly name="enddate" id="nameBackdrop" class="form-control" required value="{{ enddate|date:'Y-m-d' }}" />
                    </div>
                </div>

                <div class="col-2"></div>
                <div class="col-3"></div>
                <div class="col-2"></div>
                
               

                

                <div class="col-1">
                    <div class="col  mt-4">
                       <button class="btn btn-primary" onClick="javascript:history.go(-1);">Back</button>
                    </div>
                </div>

            
            
        </div>


<div class="card mt-5 m-1">
    <h5 class="m-2">B2C (Small) Invoices - 7</h5>
     <table class="table table-bordered W-100" style="background-color: white;">
         <thead class="bg-dark">
             <tr style="font-weight: bold;" >
                 <th class="text-white">Particular</th>
                 <th class="text-white">Taxable Amount	</th>
                 <th class="text-white">IGST ₹</th>
                 <th class="text-white">CGST ₹</th>
                 <th class="text-white">SGST ₹ </th>
                 <th class="text-white">CESS  </th>
                 <th class="text-white">Tax Amount</th>
                 <TH class="text-white">Total Amount</TH>
             </tr>
         </thead>
         <tbody>
          
             <tr>
                <td>12</td>
                <td>{{ tax12taxableamount|floatformat:2 }}</td>
                <td>0.00</td>
                <td class="gst-amount">{{tax12cgstamount|floatformat:2}}</td>
                <td class="gst-amount">{{tax12cgstamount|floatformat:2}}</td>  <!-- GST amount -->
                <td >0</td>
                <td class="gst-total"></td>  <!-- This will be calculated using JavaScript -->
                <td>{{ tax12totalamount|floatformat:2 }}</td>
            </tr>

            <tr>
                <td>18</td>
                <td>{{ tax18taxableamount|floatformat:2 }}</td>
                <td>0.00</td>
                <td class="gst-amount">{{tax18cgstamount|floatformat:2}}</td>
                <td class="gst-amount">{{tax18cgstamount|floatformat:2}}</td>  <!-- GST amount -->
                <td >0</td>
                <td class="gst-total"></td>  <!-- This will be calculated using JavaScript -->
                <td>{{ tax18totalamount|floatformat:2 }}</td>
            </tr>

            <tr>
                <td>5</td>
                <td>{{ tax5taxableamount|floatformat:2 }}</td>
                <td>0.00</td>
                <td class="gst-amount">{{tax5cgstamount|floatformat:2}}</td>
                <td class="gst-amount">{{tax5cgstamount|floatformat:2}}</td>  <!-- GST amount -->
                <td >0</td>
                <td class="gst-total"></td>  <!-- This will be calculated using JavaScript -->
                <td>{{ tax5totalamount|floatformat:2 }}</td>
            </tr>
            
         </tbody>
     </table>
 </div>


 <script>
    // Select all rows and calculate GST Total for each row
    document.addEventListener("DOMContentLoaded", function () {
        let rows = document.querySelectorAll("tbody tr");

        rows.forEach(row => {
            let gstAmounts = row.querySelectorAll(".gst-amount");  // Select all GST amounts in row
            let totalGST = 0;

            gstAmounts.forEach(cell => {
                totalGST += parseFloat(cell.innerText) || 0;  // Convert text to float and add
            });

            // Set calculated total in the last column
            row.querySelector(".gst-total").innerText = totalGST.toFixed(2);
        });
    });
</script>
{%endblock%}